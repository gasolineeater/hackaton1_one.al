components:
  schemas:
    Notification:
      type: object
      properties:
        id:
          type: integer
          description: Notification ID
        user_id:
          type: integer
          description: User ID
        title:
          type: string
          description: Notification title
        message:
          type: string
          description: Notification message
        type:
          type: string
          enum: [info, warning, alert, success]
          description: Notification type
        is_read:
          type: boolean
          description: Whether the notification has been read
        created_at:
          type: string
          format: date-time
          description: Creation timestamp
      example:
        id: 1
        user_id: 1
        title: "Data Usage Alert"
        message: "You have reached 80% of your data limit"
        type: "warning"
        is_read: false
        created_at: "2023-01-01T00:00:00.000Z"
    
    NotificationResponse:
      type: object
      properties:
        notifications:
          type: array
          items:
            $ref: '#/components/schemas/Notification'
        unreadCount:
          type: integer
          description: Count of unread notifications
        total:
          type: integer
          description: Total count of notifications
        limit:
          type: integer
          description: Limit per page
        offset:
          type: integer
          description: Offset for pagination
      example:
        notifications: [
          {
            id: 1,
            user_id: 1,
            title: "Data Usage Alert",
            message: "You have reached 80% of your data limit",
            type: "warning",
            is_read: false,
            created_at: "2023-01-01T00:00:00.000Z"
          }
        ]
        unreadCount: 1
        total: 1
        limit: 10
        offset: 0
    
    Error:
      type: object
      properties:
        message:
          type: string
          description: Error message
      example:
        message: "Notification not found!"

paths:
  /notifications:
    get:
      tags:
        - Notifications
      summary: Get all notifications
      description: Get all notifications for the authenticated user
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
          description: Number of items to return
        - in: query
          name: offset
          schema:
            type: integer
          description: Number of items to skip
        - in: query
          name: read
          schema:
            type: boolean
          description: Filter by read status
        - in: query
          name: type
          schema:
            type: string
            enum: [info, warning, alert, success]
          description: Filter by notification type
      responses:
        '200':
          description: List of notifications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationResponse'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    post:
      tags:
        - Notifications
      summary: Create a new notification
      description: Create a new notification
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - message
              properties:
                title:
                  type: string
                  description: Notification title
                message:
                  type: string
                  description: Notification message
                type:
                  type: string
                  enum: [info, warning, alert, success]
                  description: Notification type
                user_id:
                  type: integer
                  description: User ID (only for admins)
      responses:
        '201':
          description: Notification created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
        '400':
          description: Bad request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      tags:
        - Notifications
      summary: Delete all notifications
      description: Delete all notifications for the authenticated user
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: read
          schema:
            type: boolean
          description: Filter by read status
      responses:
        '200':
          description: Notifications deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Deleted 5 notifications."
                  deletedCount:
                    type: integer
                    example: 5
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /notifications/unread-count:
    get:
      tags:
        - Notifications
      summary: Get unread notification count
      description: Get count of unread notifications for the authenticated user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Unread count
          content:
            application/json:
              schema:
                type: object
                properties:
                  unreadCount:
                    type: integer
                    example: 5
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /notifications/read-all:
    put:
      tags:
        - Notifications
      summary: Mark all notifications as read
      description: Mark all notifications as read for the authenticated user
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Notifications marked as read
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Marked 5 notifications as read."
                  updatedCount:
                    type: integer
                    example: 5
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /notifications/generate-sample:
    post:
      tags:
        - Notifications
      summary: Generate sample notifications
      description: Generate sample notifications for testing
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: count
          schema:
            type: integer
          description: Number of notifications to generate
      responses:
        '200':
          description: Sample notifications generated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Generated 5 sample notifications."
                  notifications:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notification'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /notifications/{id}:
    get:
      tags:
        - Notifications
      summary: Get notification by ID
      description: Get a specific notification by ID
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Notification ID
      responses:
        '200':
          description: Notification
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Notification not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
    
    delete:
      tags:
        - Notifications
      summary: Delete notification
      description: Delete a specific notification
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Notification ID
      responses:
        '200':
          description: Notification deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Notification deleted successfully!"
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Notification not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  
  /notifications/{id}/read:
    put:
      tags:
        - Notifications
      summary: Mark notification as read
      description: Mark a specific notification as read
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: Notification ID
      responses:
        '200':
          description: Notification marked as read
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notification'
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Notification not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
